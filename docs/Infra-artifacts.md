# Infrastructure Artifacts & Analysis Techniques

This document defines the specific artifacts generated by the infrastructure analysis module, and describes the techniques used to extract DevOps-relevant insights from a project.

---

## üì¶ 1. Infrastructure Summary Report (JSON)

### Purpose:
Centralized representation of all infrastructure-related details detected from code, config, and CI/CD.

### Structure:
```json
{
  "runtime": {
    "language": "python",
    "version": "3.10",
    "env_files": [".env", ".env.example"],
    "config_files": ["settings.py", "config.yml"]
  },
  "containers": [
    {
      "path": "Dockerfile",
      "base_image": "python:3.10-slim",
      "exposed_ports": [8000],
      "entrypoint": "uvicorn app:app"
    }
  ],
  "ci_cd": {
    "tool": "GitHub Actions",
    "workflows": ["build.yml", "deploy.yml"],
    "steps": ["install", "test", "lint", "deploy"]
  },
  "infra_as_code": {
    "k8s": ["deployment.yaml", "service.yaml"],
    "terraform": ["main.tf"]
  },
  "observability": {
    "logging_libs": ["structlog", "winston"],
    "health_checks": ["/health", "/status"],
    "monitoring_hooks": ["prometheus_client"]
  },
  "secrets": {
    "exposed": ["API_KEY", "DB_PASSWORD"],
    "detection_method": "env & pattern matching"
  }
}
```

---

## üß† 2. LLM Infra Summary Report (Markdown)

### Purpose:
Plain-language description of how to build, deploy, and operate the system.

### Includes:
- Detected environment and containerization
- CI/CD flows and deployment targets
- Identified risks and security gaps
- Observability and logging readiness
- Example deployment or docker run command (if inferable)

---

## üï∏Ô∏è 3. CI/CD Pipeline Map

### Purpose:
Visual or logical graph of pipeline steps.

### Extracted From:
- `.github/workflows/*.yml`
- `.gitlab-ci.yml`
- `Jenkinsfile`, `circleci/config.yml`

### Technique:
- Parse workflow definition into nodes and edges
- LLM used to label each node‚Äôs purpose and dependencies

---

## üóÉÔ∏è 4. Dependency & Infra Resource Map

### Purpose:
Map external systems the app depends on (DBs, message queues, APIs, volume mounts, ports, etc.)

### Extracted From:
- Dockerfiles, Kubernetes YAML, Terraform files, `.env`, `config.*`, code imports

### Technique:
- Static text parsing
- Environment variable resolution
- LLM summarization and classification of service types

---

## üö® 5. Secrets and Risk Detector

### Purpose:
Highlight potential security misconfigurations or exposures

### Sources:
- `.env`, `.env.example`
- Hardcoded strings in code
- Public repo scans (if integrated)

### Technique:
- Regex and heuristics to detect common token formats
- LLM justification and classification of exposure risk

---

## üìà 6. Observability Signals Report

### Purpose:
Determine how visible and traceable the system is

### Extracted Signals:
- Logging libraries
- Logging format/style (structured? log levels?)
- Health check endpoints
- Metrics endpoints or middleware (Prometheus, OpenTelemetry, etc.)
- Error tracking hooks (Sentry, Datadog)

### Technique:
- Import scanning + log pattern detection
- Endpoint identification
- LLM interpretation of logging practices

---

## üß™ Processing Techniques Summary

| Insight Type | Technique |
|--------------|-----------|
| Runtime + Config | Static analysis, `.env` parsing, file inference |
| Containerization | Dockerfile parser, entrypoint resolver |
| CI/CD | YAML and DSL parsers + LangGraph node orchestration |
| IaC | AST parsing for YAML, HCL (Terraform), Helm templates |
| Secrets | Pattern matching + token validation heuristics |
| Observability | Import scanning + route detection |
| Risk Evaluation | LLM pattern analysis and explanation |
